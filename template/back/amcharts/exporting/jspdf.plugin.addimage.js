!function(e){"use strict";var t=function(e){var t=this.internal.newObject(),r=this.internal.write,a=this.internal.putStream;if(e.n=t,r("<</Type /XObject"),r("/Subtype /Image"),r("/Width "+e.w),r("/Height "+e.h),"Indexed"===e.cs?r("/ColorSpace [/Indexed /DeviceRGB "+(e.pal.length/3-1)+" "+(t+1)+" 0 R]"):(r("/ColorSpace /"+e.cs),"DeviceCMYK"===e.cs&&r("/Decode [1 0 1 0 1 0 1 0]")),r("/BitsPerComponent "+e.bpc),"f"in e&&r("/Filter /"+e.f),"dp"in e&&r("/DecodeParms <<"+e.dp+">>"),"trns"in e&&e.trns.constructor==Array)for(var i="",n=0;n<e.trns.length;n++)r("/Mask ["+(i+=e[i][n]+" "+e.trns[n]+" ")+"]");"smask"in e&&r("/SMask "+(t+1)+" 0 R"),r("/Length "+e.data.length+">>"),a(e.data),r("endobj")},r=function(){var e=this.internal.collections.addImage_images;for(var r in e)t.call(this,e[r])},a=function(){var e,t=this.internal.collections.addImage_images,r=this.internal.write;for(var a in t)r("/I"+(e=t[a]).i,e.n,"0","R")};e.addImage=function(e,t,i,n,o,c){if("object"==typeof e&&1===e.nodeType){var h=document.createElement("canvas");h.width=e.clientWidth,h.height=e.clientHeight;var d=h.getContext("2d");if(!d)throw"addImage requires canvas to be supported by browser.";d.drawImage(e,0,0,h.width,h.height),e=h.toDataURL("image/jpeg"),t="JPEG"}if("JPEG"!==t.toUpperCase())throw new Error("addImage currently only supports format 'JPEG', not '"+t+"'");var s,l=this.internal.collections.addImage_images,g=this.internal.getCoordinateString,C=this.internal.getVerticalCoordinateString;"data:image/jpeg;base64,"===e.substring(0,23)&&(e=atob(e.replace("data:image/jpeg;base64,",""))),l?s=Object.keys?Object.keys(l).length:function(e){var t=0;for(var r in e)e.hasOwnProperty(r)&&t++;return t}(l):(s=0,this.internal.collections.addImage_images=l={},this.internal.events.subscribe("putResources",r),this.internal.events.subscribe("putXobjectDict",a));var A=function(e){var t;if(255===!e.charCodeAt(0)||216===!e.charCodeAt(1)||255===!e.charCodeAt(2)||224===!e.charCodeAt(3)||!e.charCodeAt(6)==="J".charCodeAt(0)||!e.charCodeAt(7)==="F".charCodeAt(0)||!e.charCodeAt(8)==="I".charCodeAt(0)||!e.charCodeAt(9)==="F".charCodeAt(0)||0===!e.charCodeAt(10))throw new Error("getJpegSize requires a binary jpeg file");for(var r=256*e.charCodeAt(4)+e.charCodeAt(5),a=4,i=e.length;a<i;){if(a+=r,255!==e.charCodeAt(a))throw new Error("getJpegSize could not find the size of the image");if(192===e.charCodeAt(a+1)||193===e.charCodeAt(a+1)||194===e.charCodeAt(a+1)||195===e.charCodeAt(a+1)||196===e.charCodeAt(a+1)||197===e.charCodeAt(a+1)||198===e.charCodeAt(a+1)||199===e.charCodeAt(a+1))return t=256*e.charCodeAt(a+5)+e.charCodeAt(a+6),[256*e.charCodeAt(a+7)+e.charCodeAt(a+8),t];a+=2,r=256*e.charCodeAt(a)+e.charCodeAt(a+1)}}(e),p={w:A[0],h:A[1],cs:"DeviceRGB",bpc:8,f:"DCTDecode",i:s,data:e};return l[s]=p,o||c||(o=-96,c=-96),o<0&&(o=-1*p.w*72/o/this.internal.scaleFactor),c<0&&(c=-1*p.h*72/c/this.internal.scaleFactor),0===o&&(o=c*p.w/p.h),0===c&&(c=o*p.h/p.w),this.internal.write("q",g(o),"0 0",g(c),g(i),C(n+c),"cm /I"+p.i,"Do Q"),this}}(jsPDF.API);
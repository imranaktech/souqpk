!function(t,s,i){"use strict";t.DropDown=function(s,i){this.$el=t(i),this._init(s)},t.DropDown.defaults={speed:300,easing:"ease",gutter:0,stack:!0,delay:0,random:!1,rotated:!1,slidingIn:!1,onOptionSelect:function(t){return!1}},t.DropDown.prototype={_init:function(s){this.options=t.extend(!0,{},t.DropDown.defaults,s),this._layout(),this._initEvents()},_layout:function(){var s=this;this.minZIndex=1e3;var i=this._transformSelect();this.opts=this.listopts.children("li"),this.optsCount=this.opts.length,this.size={width:this.dd.width(),height:this.dd.height()};var o=this.$el.attr("name"),n=this.$el.attr("id"),e=void 0!==o?o:void 0!==n?n:"cd-dropdown-"+(new Date).getTime();this.inputEl=t('<input type="hidden" name="'+e+'" value="'+i+'"></input>').insertAfter(this.selectlabel),this.selectlabel.css("z-index",this.minZIndex+this.optsCount),this._positionOpts(),Modernizr.csstransitions&&setTimeout(function(){s.opts.css("transition","all "+s.options.speed+"ms "+s.options.easing)},25)},_transformSelect:function(){var s="",i="",o=-1;return this.$el.children("option").each(function(){var n=t(this),e=isNaN(n.attr("value"))?n.attr("value"):Number(n.attr("value")),a=n.attr("class"),h=n.attr("selected"),p=n.text();-1!==e&&(s+=void 0!==a?'<li data-value="'+e+'"><span class="'+a+'">'+p+"</span></li>":'<li data-value="'+e+'"><span>'+p+"</span></li>"),h&&(i=p,o=e)}),this.listopts=t("<ul/>").append(s),this.selectlabel=t("<span/>").append(i),this.dd=t('<div class="cd-dropdown"/>').append(this.selectlabel,this.listopts).insertAfter(this.$el),this.$el.remove(),o},_positionOpts:function(s){var i=this;this.listopts.css("height","auto"),this.opts.each(function(s){t(this).css({zIndex:i.minZIndex+i.optsCount-1-s,top:i.options.slidingIn?(s+1)*(i.size.height+i.options.gutter):0,left:0,marginLeft:i.options.slidingIn?s%2==0?i.options.slidingIn:-i.options.slidingIn:0,opacity:i.options.slidingIn?0:1,transform:"none"})}),this.options.slidingIn||this.opts.eq(this.optsCount-1).css({top:this.options.stack?9:0,left:this.options.stack?4:0,width:this.options.stack?this.size.width-8:this.size.width,transform:"none"}).end().eq(this.optsCount-2).css({top:this.options.stack?6:0,left:this.options.stack?2:0,width:this.options.stack?this.size.width-4:this.size.width,transform:"none"}).end().eq(this.optsCount-3).css({top:this.options.stack?3:0,left:0,transform:"none"})},_initEvents:function(){var s=this;this.selectlabel.on("mousedown.dropdown",function(t){return s.opened?s.close():s.open(),!1}),this.opts.on("click.dropdown",function(){if(s.opened){var i=t(this);s.options.onOptionSelect(i),s.inputEl.val(i.data("value")),s.selectlabel.html(i.html()),s.close()}})},open:function(){var s=this;this.dd.toggleClass("cd-active"),this.listopts.css("height",(this.optsCount+1)*(this.size.height+this.options.gutter)),this.opts.each(function(i){t(this).css({opacity:1,top:s.options.rotated?s.size.height+s.options.gutter:(i+1)*(s.size.height+s.options.gutter),left:s.options.random?Math.floor(11*Math.random()-5):0,width:s.size.width,marginLeft:0,transform:s.options.random?"rotate("+Math.floor(11*Math.random()-5)+"deg)":s.options.rotated?"right"===s.options.rotated?"rotate(-"+5*i+"deg)":"rotate("+5*i+"deg)":"none",transitionDelay:s.options.delay&&Modernizr.csstransitions?s.options.slidingIn?i*s.options.delay+"ms":(s.optsCount-1-i)*s.options.delay+"ms":0})}),this.opened=!0},close:function(){var s=this;this.dd.toggleClass("cd-active"),this.options.delay&&Modernizr.csstransitions&&this.opts.each(function(i){t(this).css({"transition-delay":s.options.slidingIn?(s.optsCount-1-i)*s.options.delay+"ms":i*s.options.delay+"ms"})}),this._positionOpts(!0),this.opened=!1}},t.fn.dropdown=function(s){var i=t.data(this,"dropdown");if("string"==typeof s){var o=Array.prototype.slice.call(arguments,1);this.each(function(){i[s].apply(i,o)})}else this.each(function(){i?i._init():i=t.data(this,"dropdown",new t.DropDown(s,this))});return i}}(jQuery,window);
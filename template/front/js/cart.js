function others_count(){update_calc_cart()}function check_ok(t){var e=$(t);e.closest("td").find(".minus").click(),e.closest("td").find(".plus").click()}function cart_submission(t){if(!t.hasAttribute("disabled")&&!t.classList.contains("disabled")){check_login_stat("state").success(function(t){$("#cart_form").submit()})}}function update_prices(){var t=base_url+"home/cart/calcs/prices";$.ajax({url:t,dataType:"json",beforeSend:function(){},success:function(t){$.each(t,function(t,e){var a=$("table").find("[data-rowid='"+e.id+"']");a.find(".sub_total").html(e.subtotal),a.find(".pric").html(e.price)})},error:function(t){console.log(t)}})}function update_calc_cart(){var t=base_url+"home/cart/calcs/full",e=$("#total"),a=$("#shipping"),o=$("#tax"),n=$("#grand");$.ajax({url:t,beforeSend:function(){e.html("..."),a.html("..."),o.html("..."),n.html("...")},success:function(t){var l=t.split("-");e.html(l[0]).fadeIn(),a.html(l[1]).fadeIn(),o.html(l[2]).fadeIn(),n.html(l[3]).fadeIn()},error:function(t){console.log(t)}})}function set_cart_map(){initialize();var t=[];$(".address").each(function(e,a){""!==this.value&&t.push(this.value)}),t=t.toString(),deleteMarkers(),geocoder.geocode({address:t},function(t,e){if(e==google.maps.GeocoderStatus.OK){if(-1==$("#langlat").val().indexOf(",")||"no"==$("#first").val()){deleteMarkers();var a=t[0].geometry.location,o=addMarker(a);map.setCenter(a),$("#langlat").val(a)}else if($("#langlat").val().indexOf(",")>=0){deleteMarkers();var n=$("#langlat").val(),l=(n=n.split(","))[0].replace("(",""),i=n[1].replace(")","");o=addMarker(new google.maps.LatLng(l,i));map.setCenter(new google.maps.LatLng(l,i))}"yes"==$("#first").val()&&$("#first").val("no"),google.maps.event.addListener(o,"drag",function(){$("#langlat").val(o.getPosition())})}})}var geocoder,map;$("body").on("click",".colrs",function(){var t=$(this),e=t.closest("tr").data("rowid"),a=t.closest("li").find("input").val();"undefined"==a&&(a=""),a=(a=(a=a.split(",").join("-")).replace(")","--")).replace("(","---"),$.ajax({url:base_url+"home/cart/upd_color/"+e+"/"+a,beforeSend:function(){},success:function(){reload_header_cart()},error:function(t){console.log(t)}})}),$("body").on("click",".quantity-button",function(){var t=$(this),e=t.closest("td").find(".quantity_field").val();t.closest("td").find(".quantity_field").data("limit");if("minus"==t.val()?e-=1:"plus"==t.val()&&(e=Number(e)+1),e>=1){t.closest("td").find(".quantity_field").val(e);var a=t.closest("td").find(".quantity_field").data("rowid"),o=t.closest("tr").find(".limit"),n=t.closest("tr").find(".sub_total");$.ajax({url:base_url+"home/cart/quantity_update/"+a+"/"+e,beforeSend:function(){n.html("...")},success:function(e){var a=e.split("---");n.html(a[0]).fadeIn(),reload_header_cart(),others_count(),"not_limit"!==a[1]?(o.html("!!").fadeIn(),t.closest("td").find(".plus").hide(),t.closest("td").find(".quantity_field").data("limit","yes"),t.closest("td").find(".quantity_field").val(a[1])):(o.html("").fadeOut(),t.closest("td").find(".plus").show(),t.closest("td").find(".quantity_field").data("limit","no"))},error:function(t){console.log(t)}})}}),$(document).ready(function(){update_calc_cart(),$(".colrs").each(function(){var t=$(this);t.closest("li").find("input").is(":checked")&&setTimeout(function(){t.click()},800)})}),$("body").on("click",".coupon_btn",function(){$(this).html();var t=$(".coupon_code").val();$("#coup_frm").val(t);var e=$("#coupon_set"),a=!1;window.FormData&&(a=new FormData(e[0]));var o=a||e.serialize();$.ajax({url:base_url+"home/coupon_check/",type:"POST",dataType:"html",data:o,cache:!1,contentType:!1,processData:!1,beforeSend:function(){$(this).html(applying)},success:function(t){if("nope"==t)notify(coupon_not_valid,"warning","bottom","right");else{update_calc_cart(),reload_header_cart(),update_prices();var e=t.split(":-:-:"),a=e[0],o=e[1];$("#coupon_report").fadeOut(),notify(coupon_discount_successful,"success","bottom","right"),"total"==a&&($(".coupon_disp").show(),$("#disco").html(e[2])),$("#coupon_report").html("<h3>"+o+"</h3>"),$("#coupon_report").fadeIn()}}})});var markers=[];function initialize(){geocoder=new google.maps.Geocoder;var t={zoom:14,center:new google.maps.LatLng(-34.397,150.644)};map=new google.maps.Map(document.getElementById("map-canvas"),t),google.maps.event.addListener(map,"click",function(t){deleteMarkers();var e=addMarker(t.latLng);$("#langlat").val(t.latLng),google.maps.event.addListener(e,"drag",function(){$("#langlat").val(e.getPosition())})})}function addMarker(t){var e={url:base_url+"uploads/others/marker.png",size:new google.maps.Size(40,60),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(20,62)},a=new google.maps.Marker({position:t,map:map,draggable:!0,icon:e,shape:{coords:[1,5,15,62,62,62,15,5,1],type:"poly"},animation:google.maps.Animation.DROP});return markers.push(a),a}function deleteMarkers(){clearMarkers(),markers=[]}function setAllMap(t){for(var e=0;e<markers.length;e++)markers[e].setMap(t)}function clearMarkers(){setAllMap(null)}$("body").on("blur",".address",function(){$(this).is("select")||set_cart_map()}),$("body").on("change",".address",function(){$(this).is("select")&&set_cart_map()});